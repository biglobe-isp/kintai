## 問題点

 - 実行
    - 実行時にpackageを消す必要がある。
    - 「同じ日付で再投入すればok」がCSVを更新すると勘違いする
 - 今回の仕様
    - 遅刻は許さないというのは？元のコードは普通に集計される
 - 現行の仕様
    - Github上のコメントには年月のパラメータが抜けている
    - 遅刻が関係ない
    - 24時以降も残業とみなされる
 
 - アドバイス from 西さん
    - ケースごとに通るかを確認。繰り返し
    - 違和感（日本語としてつじつまが合うか）
    - レア。異常ケースは別で最初は考える

# 考慮すべき点
- 裁量労働制
    - 残業時間が0
- フレックス
    - 所定就業時刻 9:30-18:30
    - 所定労働時間 8時間
    - コアタイムを 13:30-17:00
- 正常系
    - 残業代算出
    - 集計
- 異常系
    1. 0900 ~ 0100 深夜打ち間違い
    2. 0900 ~ 2500 日付かわった
    3. 0800 ~ 1800 早出 --> 問題なし
    4. 0900 ~ 1300 早退 --> 問題なし
    5. 1000 ~ 1800 遅刻 --> エラー --> 朝フレックス導入で問題なし
    6. 開始時刻 > 終了時刻
    7. 日付が異常値
    8. 開始時刻が異常値
    9. 終了時刻が異常値
    10. 引数少ない
    
# UserInterface
    1. 勤怠入力
        - 開始時刻
        - 終了時刻
    2. 集計
        - 年月

# Application
    - 勤務時間, 休憩時間, 残業時間を計算する()
        - [就業規則], 開始時刻, 終了時刻 --> [勤怠]
        
    - CSVに登録する()
        - save:

    - 集計結果を返す()
        - total: 

# Repository
    - save: [勤怠]を登録する
    - total: [月次サマリー]を取得する <-- [勤怠]

# Domain

## [勤怠]
    - 休憩時間を算出する() <-- [就業規則]
        - 終了時刻が各休憩時間の終了時間以降であれば、休憩時間を引く
    - 残業時間を算出する() <-- [就業規則]
        - 残業時間 = 勤務時間 - [就業規則].基本勤務時間
    - 早退したかどうか()
        - 終了時刻 < [就業規則].終業時刻To
        - 勤務時間 < [就業規則].基本勤務時間
    - 勤務時間を算出する() <-- [就業規則]
        - 開始時刻 > 終了時刻は勤務時間は0とする
        - 遅刻の場合は解雇
            - 条件: 開始時刻 > [就業規則].始業時刻To
        - 最終終業時刻を超えたら最終終業時刻 --> 終了時刻
            - 条件: 終了時刻が[就業規則].始業時刻From〜[就業規則].終業時刻Toの範囲外
        - 勤務時間算出
            - 休憩時間を算出する <-- 終了時刻
            - 勤務時間 = 終了時刻 - 開始時刻 - 休憩時間
        - 早退したかどうか、に関わらず特に何もしない <-- 勤務時間
        - 残業時間算出
            - 残業時間を算出する <-- 勤務時間

### 勤怠 <Entity>
    - LocaleDate 日付 --> 一意ではない
    
### 勤怠 <ValueObject>
    - LocaleTime 開始時刻
    - LocaleTime 終了時刻
    
--
## [月次サマリー]
    - 指定年月のサマリーを取得する()
        - 指定年月の勤務時間を合計する
        - 指定年月の残業時間を合計する

## 月次サマリー <Entity>
    - int 年月 --> 一意

### 月次サマリー　<ValueObject>
    - int 勤務時間
    - int 残業時間

--
## [就業規則]
    
## 就業規則 <Entity>
    - LocaleDate 適用日 --> 一意

### 就業規則 <ValueObject>
    - LocaleTime 始業時刻From --> 0900
    - LocaleTime 始業時刻To   --> 0900 --> 1000
    - LocaleTime 終業時刻From --> 1800 --> 1600
    - LocaleTime 終業時刻To   --> 1800
    - TimeRange 休憩時間[TypeOf 時間範囲]
    - LocaleTime 最終終業時刻 --> 2400
    - int 基本勤務時間 --> 480

## TimeRange
    - 休憩時間算出()
        - 終了時間 - 開始時間
    - LocaleTime 開始時間
    - LocaleTime 終了時間