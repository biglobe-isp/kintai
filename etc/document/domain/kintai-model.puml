@startuml

title 勤怠管理　ドメイン設計


package 勤怠{

'    enum WorkState as "勤務状態" << Enum >>{
'     通常
'     遅刻
'     早退
'     欠勤
'     忌引
'     予定休
'     有給
'    }

    /'*******************************
        Entity
    *******************************'/
    class "勤務時間"  as  WorkTime << Entity >> {
     - WorkDate 日付
     - StartWorkTime 始業時間
     - EndWorkTime 終業時間
     – int 勤務時間分
     - int 残業時間分
     - NowTime 入力時間
    }

    class "月勤務タイムカード" as MonthlyWorkTimeCard << Entity >>{
     – int 総勤務時間分
     - int 総残業時間分
    }

    class "年月" as YearMonth << Entity >>{
     - int　年月
    }

    class "デイリー休憩時間" as DailyBreakTimes << Entity >>{
     - List<BreakTime> breakTimes　
    }

    /'*******************************
        リポジトリ
    *******************************'/
    interface "勤務時間リポジトリ" as WorkTimeRepository{
      + void input(WorkTime workTime)
    }
    WorkTimeRepository --> WorkTime

    interface "休憩時間リポジトリ" as BreakTimeRepository{
      + DailyBreakTimes findBreakTimes()
    }
    BreakTimeRepository --> DailyBreakTimes

    interface "タイムカードリポジトリ" as TimeCardRepository{
      + MonthlyWorkTimeCard　findTimeCard(YearMonth yearMonth)
    }
    YearMonth <-- TimeCardRepository
    TimeCardRepository --> MonthlyWorkTimeCard

    /'*******************************
        Value Object
    *******************************'/
'    class StartWorkTime as "始業時間" << value object >>{
'     - int StartTime
'    }
'    WorkTime --> StartWorkTime
'
'    class EndWorkTime as "終業時間" << value object >>{
'     - int EndTime
'    }
'    WorkTime --> EndWorkTime
'
'    class WorkDate as "勤務日" << value object >>{
'     - int date
'     - int yearMonth
'    }
'    WorkTime --> WorkDate
'
'    class NowTime as "入力時間" << value object >>{
'     - LocalDateTime now
'    }
'    WorkTime --> NowTime
'
'    class "休憩時間" as BreakTime << value object >>{
'     - int 休憩開始時
'     - int 休憩開始分
'     - int 休憩終了時
'     - int 休憩終了分
'    }
'    DailyBreakTimes --> BreakTime



    class "就業規則" as  WorkingRule << Singleton >>{
     - 配列　休憩開始時間
     - 配列　休憩終了時間
    --
     + WorkTime calcWorkTime(WorkTime workTime)
    }
    WorkingRule --> DailyBreakTimes
    WorkTimeRepository --> WorkingRule
    WorkingRule --> WorkTime

}
@enduml

