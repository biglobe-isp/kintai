@startuml

package java.nio.file {
    class Path
}

package java.time {
    class LocalDate
    class LocalTime
    class LocalDateTime
    class Duration
}

package kotlin {
    class Comparable
}

package domain {
    package vo {
        class 年
        class 月
        class 日
        class 時
        class 分
        class 秒

        class 日付 {
          + value: LocalDate
          + year: 年
          + month: 月
          + day: 日
          ----
          + {static} of(年, 月, 日): 日付
        }
        日付 *--> LocalDate

        class 時刻 {
          + value: LocalTime
          + hour: Hour
          + minute: Minute
          + second: Second
          ----
          + {static} of(時, 分, 秒=0): 時刻
        }
        時刻 ..|> Comparable
        時刻 *--> LocalTime

        class 日時 {
          + value: LocalDateTime
          + date: Date
          + time: Time
          ----
          + {static} of(年, 月, 日, 時, 分, 秒): 日時
          + {static} of(日付, 時刻): 日時
        }
        日時 ..|> Comparable
        日時 *--> LocalDateTime

        class 時間 {
          + value: Duration
          + hoursPart: Hour
          + minutePart: Minute
        }
        時間 ..|> Comparable
        時間 *--> Duration

        class 時間範囲 {
          + start: 時刻
          + end: 時刻
          ----
          + toTimeSpan(): 時間
        }
        時間範囲 *--> 時刻
        時間範囲 *--> 時間

        class 出勤日 {
          ----
          + {static} of(年, 月, 日): 出勤日
          + {static} of(日付): 出勤日
        }
        出勤日 --|> 日付

        class 出勤時刻
        出勤時刻 --|> 時刻

        class 退勤時刻
        退勤時刻 --|> 時刻

        class 打刻日時
        打刻日時 --|> 日時

        class 所定内労働時間
        所定内労働時間 --|> 時間

        class 残業時間
        残業時間 --|> 時間

        class 休憩時間
        休憩時間 --|> 時間

        class 実労働時間
        実労働時間 --|> 時間
    }

    class 勤務時間 {
      + 所定内労働時間: 所定内労働時間
      + 休憩時間: 休憩時間
      + 残業時間: 残業時間
      + 実労働時間: 実労働時間
      ----
    }
    勤務時間 --|> 時間範囲
    勤務時間 *--> 所定内労働時間
    勤務時間 *--> 休憩時間
    勤務時間 *--> 残業時間
    勤務時間 *--> 実労働時間

    class 勤務時間サマリ {
      + 実労働時間: 実労働時間
      + 残業時間: 残業時間
      ----
      + {static} of(List<勤務記録>): 勤務時間サマリ
    }
    勤務時間サマリ *---> 実労働時間
    勤務時間サマリ *---> 残業時間
    勤務時間サマリ ...> 勤怠記録

    class 勤務規程 {
      + 所定内労働時間: 所定内労働時間
      + 休憩時間: List<時間範囲>
      ----
      + calcWorkingTimeRange(出勤時刻, 退勤時刻): 勤務時間
    }
    勤務規程 *--> 所定内労働時間
    勤務規程 *--> 時間範囲
    勤務規程 ..> 出勤時刻
    勤務規程 ..> 退勤時刻
    勤務規程 *-> 勤務時間

    class 勤怠記録 {
      + 出勤日: 出勤日
      + 勤務時間: 勤務時間
      + 打刻日時: 打刻日時
      ----
    }
    勤怠記録 *--> 出勤日
    勤怠記録 *--> 打刻日時
    勤怠記録 *--> 勤務時間

    interface 勤怠リポジトリ <<Repository>> {
      ----
      + save(勤怠記録)
      + findByYearAndMonth(年, 月, 勤務規程): List<勤務記録>
    }
    勤怠リポジトリ *---> 勤怠記録
    勤怠リポジトリ .> 勤務規程
}

package service {
    class 出勤サービス <<Service>> {
      - リポジトリ: 勤怠リポジトリ
      - 勤務規程: 勤務規程
      ----
      + punch(出勤日, 出勤時刻, 退勤時刻)
    }
    出勤サービス *---> 勤怠リポジトリ
    出勤サービス *---> 勤務規程
    出勤サービス ...> 出勤日
    出勤サービス ...> 出勤時刻
    出勤サービス ...> 退勤時刻

    class 勤怠集計サービス <<Service>> {
      - リポジトリ: 勤怠リポジトリ
      - 勤務規程: 勤務規程
      ----
      + summarize(年, 月): 勤務時間サマリ
    }
    勤怠集計サービス *---> 勤怠リポジトリ
    勤怠集計サービス *--> 勤務規程
    勤怠集計サービス *---> 勤務時間サマリ
}

package repository.file {
    class 勤怠ファイルリポジトリ <<Repository>> {
      + ファイルパス: Path
      ----
    }
    勤怠ファイルリポジトリ ...|> 勤怠リポジトリ
    勤怠ファイルリポジトリ *--> Path
}

package presentation {
  class コマンド {
    - 勤怠管理: 勤怠管理
    ----
    + {static} main(パラメタ)
    + 入力(パラメタ)
    + 集計(パラメタ)
  }

  コマンド ..> 出勤サービス
  コマンド ..> 勤怠集計サービス
}

@enduml